<!DOCTYPE html>
<html lang="en" 
      xmlns:th="http://www.thymeleaf.org">
	  
	<head>
		
		<th:block th:replace="~{ common/headers :: before_title }"></th:block>
			  
		<title>
			Portfolio Listing Page Fragments
		</title>
		
		<th:block th:replace="~{ common/headers :: after_title }"></th:block>
		

		<th:block th:fragment="after_title">			
			<link th:href="|${projectData.urlPrefixServer1}/pages/portfolio_listing_page/portfolio_listing_page_styles.css|"
				  rel="stylesheet">
			
			<script th:src="|${projectData.urlPrefixServer1}/pages/portfolio_listing_page/portfolio_fetch.mjs|"
					type="module"
					defer>
			</script>
		</th:block>

		
	</head>
	
	
	<body>
		
		<p>Current Page: Portfolio Listing Page Fragments.</p>
		
		
		<!-- Fragment: grid_middle_content --> 
		
		<th:block th:fragment="grid_middle_content">
			<!-- <p>Welcome to the Portfolio Listing Page.</p> -->
			
			<th:block th:with="numAccounts = ${accountList.size()}, 
			                   condition = ${numAccounts} == 1">
							   
				<th:block th:if="${condition}">
					<th:block th:replace="~{  :: content_fragment }"></th:block>
					<th:block th:replace="~{  :: script_arguments_fragment }"></th:block>
					<th:block th:replace="~{  :: page_placeholders_fragment }"></th:block>
				</th:block>
				<th:block th:unless="${condition}">
					<th:block th:replace="~{  :: error_message_fragment }"></th:block>			
				</th:block>
				
			</th:block>
			
		</th:block>
		
		
		<!-- Fragment: script_arguments_fragment --> 
		
		<th:block th:fragment="script_arguments_fragment" th:object="${accountList.getFirst()}">
			
			<div class="script_arguments">
				<p id="script_arguments_1_account_id" th:text="*{id}"></p>
		    </div>
						
		</th:block>
		

		<!-- Fragment: content_fragment --> 

		<th:block th:fragment="content_fragment">
			<th:block th:replace="~{  :: content_header_fragment }"></th:block>
			<th:block th:replace="~{  :: alphabet_list_fragment }"></th:block>		
		</th:block>
		
		
		<!-- Fragment: content_header_fragment --> 

		<th:block th:fragment="content_header_fragment">
			<div id="content_header_block_id_1">
				<div class="title">
					<h1>
						Welcome to the Portfolio Listing Page.
					</h1>
				</div>
				<div class="content">
					<p>All portfolios are listed according to their portfolio name in alphabetical order.</p>
					<p>
						Please click on one of the letters below 
						to view the list of portfolios 
						that have a portfolio name 
						that starts with that letter.
					</p>
				</div>
			</div>	
		</th:block>		

		

		
		<!-- Fragment: alphabet_list_fragment -->

		<th:block th:fragment="alphabet_list_fragment">
			<th:block th:with="alphabetList = ${#strings.listSplit( 'A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z', ',' )}">
				<th:block th:replace="~{  :: alphabet_accordion_fragment }"></th:block>
			</th:block>
		</th:block>
		
		<!-- Fragment: alphabet_accordion_fragment -->
		
		<th:block th:fragment="alphabet_accordion_fragment">
			<div id="alphabet_accordion_block_id_1" class="accordion">
				<th:block th:each="currAlphabet : ${alphabetList}" >
					<th:block th:replace="~{  :: alphabet_accordion_item_fragment }"></th:block>
				</th:block>				
			</div>
		</th:block>
		
		<!-- Fragment: alphabet_accordion_item_fragment -->
		
		<th:block th:fragment="alphabet_accordion_item_fragment">
			<div th:id="|accordion_item_id_${currAlphabet}|" class="accordion-item">
				<h2 th:id="|accordion_header_id_${currAlphabet}|" class="accordion-header">
					<button class="accordion-button collapsed"
					        type="button"
							data-bs-toggle="collapse"
							data-bs-target=""
							aria-expanded="false"
							aria-controls=""
							th:attr="data-bs-target = |#accordion_collapse_id_${currAlphabet}|,
							         aria-controls = |accordion_collapse_id_${currAlphabet}|"
							th:text="|${currAlphabet}|">
					</button>
				</h2>
				<div th:id="|accordion_collapse_id_${currAlphabet}|" class="accordion-collapse collapse"
				     data-bs-parent="alphabet_accordion_block_id_1">
					<div th:id="|accordion_body_id_${currAlphabet}|" class="accordion-body">
						 <th:block th:replace="~{  :: portfolio_list_fragment }"></th:block>						 
					</div>
				</div>
			</div>
		</th:block>
		
		
		<!-- Fragment: portfolio_list_fragment -->

		<th:block th:fragment="portfolio_list_fragment">
			<div class="table-responsive">
				<table class="table table-striped table-hover">
					<thead>
						<tr>
							<th scope="col">#</th>
							<th scope="col">Name</th>
							<th scope="col">Description</th>
						</tr>
					</thead>
					<tbody class="table-group-divider">
					</tbody>
				</table>
			</div>
		</th:block>

		
		
				
		<!-- Fragment: grid_left_content --> 

		<th:block th:fragment="grid_left_content">
			
			<th:block th:with="numAccounts = ${accountList.size()}, 
					           condition = ${numAccounts} == 1">
							   
				<th:block th:if="${condition}">
					<th:block th:replace="~{  :: nav_bar_left_fragment }"></th:block>
				</th:block>
				
			</th:block>
			
		</th:block>		
		
		
		<!-- Fragment: nav_bar_left_fragment --> 

		<th:block th:fragment="nav_bar_left_fragment">
			
			<div id="nav_bar_left_block_id_1" class="nav_bar_left_block container-fluid text-center">			
				<div class="row">
					<div class="col py-3">
						<button id="button_create_portfolio"
						        class="btn rounded-pill w-100" 
						        type="button"
								data-bs-toggle="modal"
								data-bs-target="#modal_create_portfolio">
							Create Portfolio
						</button>
					</div>					
				</div>				
				<div class="row">
					<div class="col py-3">
						<button id="button_delete_portfolio"
						        class="btn rounded-pill w-100" 
						        type="button"
								data-bs-toggle="modal"
								data-bs-target="#modal_delete_portfolio">
							Delete Portfolio
						</button>
					</div>					
				</div>							
			</div>
			
			<th:block th:replace="~{  :: nav_bar_left_modal_create_portfolio_fragment }"></th:block>
			<th:block th:replace="~{  :: nav_bar_left_modal_delete_portfolio_fragment }"></th:block>
			
		</th:block>		
		
		
		
		<!-- CREATE PORTFOLIO -->	
		
			
		<!-- Fragment: nav_bar_left_modal_create_portfolio_fragment --> 

		<th:block th:fragment="nav_bar_left_modal_create_portfolio_fragment">
			<div id="modal_create_portfolio"
			     class="modal fade"
				 tabindex="-1"
				 aria-labelledby="modal_create_portfolio_title"
				 aria-hidden="true">
				 
				<div class="modal-dialog modal-xl modal-fullscreen-md-down">
					<div class="modal-content">
						<div class="modal-header">
							<h1 id="modal_create_portfolio_title" 
							    class="modal-title fs-5">
								Create Portfolio
							</h1>
							<button class="btn-close" 
							        type="button"
									data-bs-dismiss="modal"
									aria-label="Close">
							</button>
						</div>
						<div class="modal-body">
							<th:block th:replace="~{  :: modal_body_create_portfolio_fragment }"></th:block>
						</div>
						<div class="modal-footer">
							<button class="btn btn-secondary" 
							        type="button"
									data-bs-dismiss="modal">
								Close
							</button>
							<button class="btn btn-info"
							        form="form_create_portfolio" 
							        type="reset">
								Reset		
							</button>							
							<button class="btn btn-primary"
							        form="form_create_portfolio" 
							        type="submit">
								Submit		
							</button>
						</div>
					</div>
				</div>
				
			</div>
			
			
		</th:block>

		
				
		<!-- Fragment: modal_body_create_portfolio_fragment --> 

		<th:block th:fragment="modal_body_create_portfolio_fragment">
				  
			<form id="form_create_portfolio" 
			      th:action="|${projectData.urlPrefixServer1}/portfolios/create_portfolio|" 
			      method="post">

				
				<div class="input-group mb-3">
					<span class="input-group-text">
						Portfolio Name:
					</span>
					<div class="form-floating">
						<input id="create_portfolio_name" 
							   class="form-control"
							   type="text"
							   maxlength="40"
							   name="name"
							   placeholder="Placeholder Portfolio Name"
							   required>
						<label for="create_portfolio_name">
							Portfolio Name
						</label>
					</div>
										
				</div>

				<div class="input-group mb-3">
					<span class="input-group-text">
						Invest Start Day:
					</span>
					<input id="create_portfolio_invest_start_day" 
					       class="form-control"
					       type="number"
						   max="-1"
						   name="investStartDay"
						   value="-1"
						   aria-describedby="create_portfolio_invest_start_day_form_text"
						   required>			
				</div>
				<div id="create_portfolio_invest_start_day_form_text"
				     class="form-text text-start mb-3">
					Please enter a negative integer.
				</div>
				<br />
				
				

				<div class="input-group mb-3">
					<span class="input-group-text">
						Portfolio Description:
					</span>
					<div class="form-floating">
						<input id="create_portfolio_description" 
						       class="form-control"
						       type="text"
							   maxlength="500"
							   name="description"
							   placeholder="Placeholder Portfolio Description"
							   required>
						<label for="create_portfolio_description">
							Portfolio Description
						</label>						
					</div>
				</div>
								
				
			</form>
						
		</th:block>
		
		
		
		<!-- DELETE PORTFOLIO -->



		<!-- Fragment: nav_bar_left_modal_delete_portfolio_fragment --> 

		<th:block th:fragment="nav_bar_left_modal_delete_portfolio_fragment">
			<div id="modal_delete_portfolio"
			     class="modal fade"
				 tabindex="-1"
				 aria-labelledby="modal_delete_portfolio_title"
				 aria-hidden="true">
				 
				<div class="modal-dialog modal-xl modal-fullscreen-md-down">
					<div class="modal-content">
						<div class="modal-header">
							<h1 id="modal_delete_portfolio_title" 
							    class="modal-title fs-5">
								Delete Portfolio
							</h1>
							<button class="btn-close" 
							        type="button"
									data-bs-dismiss="modal"
									aria-label="Close">
							</button>
						</div>
						<div class="modal-body">
							<th:block th:replace="~{  :: modal_body_delete_portfolio_fragment }"></th:block>
						</div>
						<div class="modal-footer">
							<button class="btn btn-secondary" 
							        type="button"
									data-bs-dismiss="modal">
								Close
							</button>
							<button class="btn btn-info"
							        form="form_delete_portfolio" 
							        type="reset">
								Reset		
							</button>							
							<button class="btn btn-primary"
							        form="form_delete_portfolio" 
							        type="submit">
								Submit		
							</button>
						</div>
					</div>
				</div>
				
			</div>
			
			
		</th:block>		
		
		
		<!-- Fragment: modal_body_delete_portfolio_fragment --> 

		<th:block th:fragment="modal_body_delete_portfolio_fragment">
				  
			<form id="form_delete_portfolio" 
			      th:action="|${projectData.urlPrefixServer1}/portfolios/delete_portfolio|" 
			      method="post">
				
				
				
				<div class="text-start mb-3">
					<h4>
						Please select the checkbox next to the portfolio you want to delete:
					</h4>
				</div>
				
				<!-- START CHECKBOX -->
				<th:block th:each="currPortfolio, loopStatus : ${accountList.getFirst().portfolios}">
					
					<div class="input-group mb-3">
						
						<div class="input-group-text">
							<input id="delete_portfolio_checkbox" 
							       class="form-check-input"
							       type="checkbox"
								   th:name="|portfolio_id_list|"
								   th:value="|${currPortfolio.id}|"
								   aria-label="Delete Portfolio Checkbox">								
						</div>
						
						<div class="form-floating">
							<input id="delete_portfolio_name" 
							       class="form-control"
							       type="text"
								   maxlength="40"
								   th:value="|${currPortfolio.name}|"
								   placeholder="Place Holder Name"
								   readonly>
							<label for="delete_portfolio_name">
								Name
							</label>															   							
						</div>
						
						<div class="form-floating">
							<input id="delete_portfolio_invest_start_day" 
							       class="form-control"
							       type="text"
								   maxlength="40"
								   th:value="|${currPortfolio.investStartDay}|"
								   placeholder="Place Holder Invest Start Day"
								   readonly>
							<label for="delete_portfolio_invest_start_day">
								Invest Start Day
							</label>															   							
						</div>	
											
						<div class="form-floating">
							<input id="delete_portfolio_description" 
							       class="form-control"
							       type="text"
								   maxlength="40"
								   th:value="|${currPortfolio.description}|"
								   placeholder="Place Holder Description"
								   readonly>
							<label for="delete_portfolio_description">
								Description
							</label>															   							
						</div>
						
					</div>					

						   								
				</th:block>
								
				
			</form>
						
		</th:block>
		
		
		
		<!-- Fragment: page_placeholders_fragment --> 

		<th:block th:fragment="page_placeholders_fragment">
			
			<div class="page_placeholders">
				<span class="page_placeholders_form_submit">
					<span class="spinner-border spinner-border-sm" role="placeholder">
					</span>
				</span>							
			</div>
						
		</th:block>		
		
		

		
		
		
		
		<!-- Fragment: error_message_fragment --> 

		<th:block th:fragment="error_message_fragment">
			<div class="error_message_block">
				<div class="error_message_title_block">
					<p>Error Message:</p>
				</div>
				<div class="error_message_content_block">
					<p th:text="|numAccounts == ${numAccounts}|"></p>
				</div>
			</div>
		</th:block>

		

	</body>
	
</html>

